
{
    "entities": {
        "UserProfile": {
            "title": "User Profile",
            "description": "Represents the profile data for a registered user.",
            "type": "object",
            "properties": {
                "uid": { "type": "string", "description": "The user's unique ID from Firebase Auth." },
                "email": { "type": "string", "format": "email", "description": "The user's email address." },
                "displayName": { "type": "string", "description": "The user's display name." },
                "photoURL": { "type": "string", "description": "URL of the user's profile picture." },
                "role": { "type": "string", "enum": ["Admin", "Accountant"], "description": "The role of the user within the application." },
                "password": { "type": "string", "description": "The user's password, only used for creation." },
                "companyIds": {
                    "type": "array",
                    "description": "An array of company IDs that this user is associated with.",
                    "items": {
                        "type": "string"
                    }
                },
                "createdBy": {
                    "type": "string",
                    "description": "The UID of the admin who created this user."
                }
            },
            "required": ["uid", "email", "role"]
        },
        "Company": {
            "title": "Company",
            "description": "Represents a company client in the accounting platform.",
            "type": "object",
            "properties": {
                "id": { "type": "string", "description": "Unique identifier for the company." },
                "name": { "type": "string", "description": "The name of the company." },
                "rut": { "type": "string", "description": "The company's Rol Único Tributario (RUT)." },
                "address": { "type": "string", "description": "The physical address of the company." },
                "giro": { "type": "string", "description": "Giro o actividad comercial de la empresa." },
                "active": { "type": "boolean", "description": "Whether the company is currently active." },
                "ownerId": { "type": "string", "description": "The UID of the user who owns/created this company." },
                "isDistributor": { "type": "boolean" },
                "startYear": { "type": "number" },
                "periodStartDate": { "type": "string", "format": "date" },
                "periodEndDate": { "type": "string", "format": "date" },
                "profitAccount": { "type": "string" },
                "lossAccount": { "type": "string" },
                "salesInvoicesReceivableAccount": { "type": "string" },
                "salesNotesReceivableAccount": { "type": "string" },
                "salesVatAccount": { "type": "string" },
                "salesOtherTaxesAccount": { "type": "string" },
                "proportionalVat": { "type": "boolean" },
                "purchasesInvoicesPayableAccount": { "type": "string" },
                "purchasesNotesPayableAccount": { "type": "string" },
                "purchasesVatAccount": { "type": "string" },
                "purchasesOtherTaxesAccount": { "type": "string" },
                "feesPayableAccount": { "type": "string" },
                "feesWithholdingAccount": { "type": "string" },
                "incomeFeesReceivableAccount": { "type": "string" },
                "incomeFeesWithholdingAccount": { "type": "string" },
                "remunerationExpenseAccount": { "type": "string" },
                "salariesPayableAccount": { "type": "string" },
                "afpPayableAccount": { "type": "string" },
                "healthPayableAccount": { "type": "string" },
                "unemploymentInsurancePayableAccount": { "type": "string" }
            },
            "required": ["id", "name", "rut", "address", "giro", "active"]
        },
        "Account": {
            "title": "Account",
            "description": "Represents a single account in the chart of accounts for a company.",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "code": { "type": "string" },
                "name": { "type": "string" },
                "type": { "type": "string", "enum": ["Activo", "Pasivo", "Patrimonio", "Resultado"] },
                "balance": { "type": "number" },
                "companyId": { "type": "string" }
            },
            "required": ["id", "code", "name", "type", "balance"]
        },
        "Voucher": {
            "title": "Voucher",
            "description": "Represents an accounting voucher with multiple entries.",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "date": { "type": "string", "format": "date" },
                "type": { "type": "string", "enum": ["Ingreso", "Egreso", "Traspaso"] },
                "description": { "type": "string" },
                "status": { "type": "string", "enum": ["Borrador", "Contabilizado"] },
                "total": { "type": "number" },
                "entries": { 
                    "type": "array", 
                    "items": { "$ref": "#/entities/VoucherEntry" }
                },
                "companyId": { "type": "string" }
            },
            "required": ["id", "date", "type", "description", "status", "total", "entries"]
        },
        "VoucherEntry": {
            "title": "VoucherEntry",
            "description": "Represents a single entry within an accounting voucher.",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "account": { "type": "string" },
                "description": { "type": "string" },
                "debit": { "type": "number" },
                "credit": { "type": "number" }
            },
            "required": ["id", "account", "debit", "credit"]
        },
        "Subject": {
            "title": "Subject",
            "description": "Represents a subject (client, provider, etc.) for a company.",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "name": { "type": "string" },
                "rut": { "type": "string" },
                "type": { "type": "string", "enum": ["Cliente", "Proveedor", "Otro"] },
                "status": { "type": "string", "enum": ["Active", "Inactive"] },
                "companyId": { "type": "string" }
            },
            "required": ["id", "name", "rut", "type", "status"]
        },
        "CostCenter": {
            "title": "CostCenter",
            "description": "Represents a cost center for a specific company, used to track expenses and revenues for a particular department, project, or business unit.",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "name": { "type": "string", "description": "The name of the cost center." },
                "description": { "type": "string", "description": "A brief description of the cost center's purpose." },
                "companyId": { "type": "string", "description": "The ID of the company this cost center belongs to." }
            },
            "required": ["id", "name"]
        },
        "Employee": {
            "title": "Employee",
            "description": "Represents an employee of a company.",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "rut": { "type": "string" },
                "firstName": { "type": "string" },
                "lastName": { "type": "string" },
                "birthDate": { "type": "string", "format": "date" },
                "nationality": { "type": "string" },
                "address": { "type": "string" },
                "commune": { "type": "string" },
                "region": { "type": "string" },
                "phone": { "type": "string" },
                "email": { "type": "string", "format": "email" },
                "gender": { "type": "string", "enum": ["Masculino", "Femenino", "Otro"] },
                "civilStatus": { "type": "string", "enum": ["Soltero/a", "Casado/a", "Viudo/a", "Divorciado/a", "Conviviente Civil"] },
                "contractType": { "type": "string", "enum": ["Indefinido", "Plazo Fijo", "Por Obra o Faena", "Part-Time", "Honorarios"] },
                "position": { "type": "string" },
                "contractStartDate": { "type": "string", "format": "date" },
                "contractEndDate": { "type": "string", "format": "date" },
                "baseSalary": { "type": "number" },
                "gratificationType": { "type": "string", "enum": ["Automatico", "Manual"], "description": "Tipo de cálculo para la gratificación legal."},
                "gratification": { "type": "number", "description": "Gratificación Legal" },
                "mobilization": { "type": "number", "description": "Bono de Movilización" },
                "collation": { "type": "number", "description": "Bono de Colación" },
                "healthSystem": { "type": "string", "enum": ["Fonasa", "Consalud", "CruzBlanca", "Colmena", "Banmédica", "Vida Tres", "Nueva Masvida"]},
                "healthContributionType": { "type": "string", "enum": ["Porcentaje", "Monto Fijo"], "description": "Tipo de cotización de salud" },
                "healthContributionValue": { "type": "number", "description": "Valor de la cotización de salud" },
                "afp": { "type": "string", "enum": ["Capital", "Cuprum", "Habitat", "Modelo", "Planvital", "Provida", "Uno"]},
                "unemploymentInsuranceType": { "type": "string", "enum": ["Indefinido", "Plazo Fijo"], "description": "Tipo de contrato para seguro de cesantía" },
                "hasUnemploymentInsurance": { "type": "boolean" },
                "paymentMethod": { "type": "string", "enum": ["Transferencia Bancaria", "Cheque", "Efectivo"] },
                "bank": { "type": "string", "enum": ["Banco de Chile", "Banco Internacional", "Scotiabank Chile", "BCI", "Banco Bice", "HSBC Bank (Chile)", "Banco Santander-Chile", "Itaú Corpbanca", "Banco Security", "Banco Falabella", "Banco Ripley", "Banco Consorcio", "Scotiabank Azul (Ex-BBVA)", "BancoEstado"] },
                "accountType": { "type": "string", "enum": ["Cuenta Corriente", "Cuenta Vista", "Cuenta de Ahorro"] },
                "accountNumber": { "type": "string" },
                "costCenterId": { "type": "string" },
                "status": { "type": "string", "enum": ["Active", "Inactive"] },
                "companyId": { "type": "string" }
            },
            "required": ["id", "rut", "firstName", "lastName", "position", "status"]
        },
        "AccountGroup": {
            "title": "AccountGroup",
            "description": "Main groups for classifying the chart of accounts.",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "name": { "type": "string" }
            },
            "required": ["id", "name"]
        },
        "Institution": {
            "title": "Institution",
            "description": "Represents pension and health institutions for payroll calculations.",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "name": { "type": "string" },
                "type": { "type": "string", "enum": ["AFP", "Salud", "Mutual", "Caja de Compensación"] }
            },
            "required": ["id", "name", "type"]
        },
        "FamilyAllowanceParameter": {
            "title": "FamilyAllowanceParameter",
            "description": "Parameters for calculating family allowance.",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "tramo": { "type": "string" },
                "desde": { "type": "number" },
                "hasta": { "type": "number" },
                "monto": { "type": "number" }
            },
            "required": ["id", "tramo", "desde", "hasta", "monto"]
        },
        "TaxParameter": {
            "title": "TaxParameter",
            "description": "Parameters for the Second Category Unique Tax (IUT).",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "tramo": { "type": "string" },
                "desde": { "type": "number" },
                "hasta": { "type": "number" },
                "factor": { "type": "number" },
                "rebaja": { "type": "number" }
            },
            "required": ["id", "tramo", "desde", "hasta", "factor", "rebaja"]
        },
         "HealthEntity": {
            "title": "HealthEntity",
            "description": "Health entities (Isapres, Fonasa) for payroll.",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "code": { "type": "string" },
                "name": { "type": "string" },
                "mandatoryContribution": { "type": "number" },
                "previredCode": { "type": "string" },
                "dtCode": { "type": "string" }
            },
            "required": ["id", "code", "name", "mandatoryContribution", "previredCode", "dtCode"]
        },
        "AfpEntity": {
            "title": "AfpEntity",
            "description": "Pension Fund Administrators (AFP) for payroll calculations.",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "code": { "type": "string" },
                "name": { "type": "string" },
                "mandatoryContribution": { "type": "number" },
                "previredCode": { "type": "string" },
                "provisionalRegime": { "type": "string" },
                "dtCode": { "type": "string" }
            },
            "required": ["id", "code", "name", "mandatoryContribution", "previredCode", "provisionalRegime", "dtCode"]
        },
        "Purchase": {
            "title": "Purchase",
            "description": "Represents a purchase document.",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "date": { "type": "string", "format": "date" },
                "documentNumber": { "type": "string" },
                "supplier": { "type": "string" },
                "total": { "type": "number" },
                "status": { "type": "string", "enum": ["Pendiente", "Pagada", "Vencida"] },
                "companyId": { "type": "string" }
            },
            "required": ["id", "date", "documentNumber", "supplier", "total", "status", "companyId"]
        },
        "Sale": {
            "title": "Sale",
            "description": "Represents a sales document.",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "date": { "type": "string", "format": "date" },
                "documentNumber": { "type": "string" },
                "customer": { "type": "string" },
                "total": { "type": "number" },
                "status": { "type": "string", "enum": ["Pendiente", "Pagada", "Vencida"] },
                "companyId": { "type": "string" }
            },
            "required": ["id", "date", "documentNumber", "customer", "total", "status", "companyId"]
        },
        "Fee": {
            "title": "Fee",
            "description": "Represents a fee document (honorarios).",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "date": { "type": "string", "format": "date" },
                "documentNumber": { "type": "string" },
                "issuer": { "type": "string" },
                "total": { "type": "number" },
                "status": { "type": "string", "enum": ["Pendiente", "Pagada", "Vencida"] },
                "companyId": { "type": "string" }
            },
            "required": ["id", "date", "documentNumber", "issuer", "total", "status", "companyId"]
        },
        "EconomicIndicator": {
            "title": "EconomicIndicator",
            "description": "Stores monthly economic indicators like UF, UTM, UTA, etc.",
            "type": "object",
            "properties": {
                "id": { "type": "string", "description": "Unique ID, typically in 'YYYY-MM' format." },
                "year": { "type": "number" },
                "month": { "type": "number" },
                "uf": { "type": "number", "description": "Unidad de Fomento value for the month." },
                "utm": { "type": "number", "description": "Unidad Tributaria Mensual value for the month." },
                "uta": { "type": "number", "description": "Unidad Tributaria Anual value for the month." },
                "minWage": { "type": "number", "description": "Minimum wage for the month." },
                "gratificationCap": { "type": "number", "description": "Legal gratification cap for the month." }
            },
            "required": ["id", "year", "month"]
        }
    },
    "firestore": {
        "/users/{userId}": {
            "schema": { "$ref": "#/entities/UserProfile" },
            "description": "Collection to store user profile information."
        },
        "/companies": {
            "schema": { "$ref": "#/entities/Company" },
            "description": "Collection of all companies managed by the platform."
        },
        "/companies/{companyId}/accounts": {
            "schema": { "$ref": "#/entities/Account" },
            "description": "Sub-collection of accounts for a specific company."
        },
        "/companies/{companyId}/vouchers": {
            "schema": { "$ref": "#/entities/Voucher" },
            "description": "Sub-collection of accounting vouchers for a specific company."
        },
        "/companies/{companyId}/subjects": {
            "schema": { "$ref": "#/entities/Subject" },
            "description": "Sub-collection of subjects (clients, providers) for a specific company."
        },
        "/companies/{companyId}/cost-centers": {
            "schema": { "$ref": "#/entities/CostCenter" },
            "description": "Sub-collection of cost centers for a specific company."
        },
        "/companies/{companyId}/employees": {
            "schema": { "$ref": "#/entities/Employee" },
            "description": "Sub-collection of employees for a specific company."
        },
         "/companies/{companyId}/purchases": {
            "schema": { "$ref": "#/entities/Purchase" },
            "description": "Sub-collection of purchase documents for a specific company."
        },
        "/companies/{companyId}/sales": {
            "schema": { "$ref": "#/entities/Sale" },
            "description": "Sub-collection of sales documents for a specific company."
        },
        "/companies/{companyId}/fees": {
            "schema": { "$ref": "#/entities/Fee" },
            "description": "Sub-collection of fee documents for a specific company."
        },
        "/users/{userId}/account-groups": {
            "schema": { "$ref": "#/entities/AccountGroup" },
            "description": "User-specific collection of account groups."
        },
        "/system-parameters/economic-indicators/{indicatorId}": {
            "schema": { "$ref": "#/entities/EconomicIndicator" },
            "description": "Global collection of monthly economic indicators."
        },
        "/system-parameters/health-entities/{entityId}": {
            "schema": { "$ref": "#/entities/HealthEntity" },
            "description": "Global collection of health entities (Isapres and Fonasa)."
        },
        "/system-parameters/afp-entities/{entityId}": {
            "schema": { "$ref": "#/entities/AfpEntity" },
            "description": "Global collection of AFP entities."
        },
        "/system-parameters/family-allowance-parameters/{paramId}": {
            "schema": { "$ref": "#/entities/FamilyAllowanceParameter" },
            "description": "Global collection of family allowance parameters."
        },
        "/system-parameters/tax-parameters/{paramId}": {
            "schema": { "$ref": "#/entities/TaxParameter" },
            "description": "Global collection of tax parameters for IUT."
        },
        "/system-parameters/institutions/{institutionId}": {
            "schema": { "$ref": "#/entities/Institution" },
            "description": "Global collection of pension and health institutions."
        }
    },
    "auth": {
        "providers": ["google.com", "password"]
    }
}
