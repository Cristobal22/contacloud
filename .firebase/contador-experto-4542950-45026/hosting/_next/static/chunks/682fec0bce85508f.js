(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var a=e.i(43476),l=e.i(71645),t=e.i(75157);let r=l.forwardRef(({className:e,...l},r)=>(0,a.jsx)("div",{ref:r,className:(0,t.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...l}));r.displayName="Card";let s=l.forwardRef(({className:e,...l},r)=>(0,a.jsx)("div",{ref:r,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",e),...l}));s.displayName="CardHeader";let d=l.forwardRef(({className:e,...l},r)=>(0,a.jsx)("div",{ref:r,className:(0,t.cn)("text-2xl font-semibold leading-none tracking-tight",e),...l}));d.displayName="CardTitle";let n=l.forwardRef(({className:e,...l},r)=>(0,a.jsx)("div",{ref:r,className:(0,t.cn)("text-sm text-muted-foreground",e),...l}));n.displayName="CardDescription";let o=l.forwardRef(({className:e,...l},r)=>(0,a.jsx)("div",{ref:r,className:(0,t.cn)("p-6 pt-0",e),...l}));o.displayName="CardContent";let i=l.forwardRef(({className:e,...l},r)=>(0,a.jsx)("div",{ref:r,className:(0,t.cn)("flex items-center p-6 pt-0",e),...l}));i.displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>o,"CardDescription",()=>n,"CardFooter",()=>i,"CardHeader",()=>s,"CardTitle",()=>d])},84774,e=>{"use strict";var a=e.i(43476),l=e.i(71645),t=e.i(75157);let r=l.forwardRef(({className:e,...l},r)=>(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:r,className:(0,t.cn)("w-full caption-bottom text-sm",e),...l})}));r.displayName="Table";let s=l.forwardRef(({className:e,...l},r)=>(0,a.jsx)("thead",{ref:r,className:(0,t.cn)("[&_tr]:border-b",e),...l}));s.displayName="TableHeader";let d=l.forwardRef(({className:e,...l},r)=>(0,a.jsx)("tbody",{ref:r,className:(0,t.cn)("[&_tr:last-child]:border-0",e),...l}));d.displayName="TableBody";let n=l.forwardRef(({className:e,...l},r)=>(0,a.jsx)("tfoot",{ref:r,className:(0,t.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...l}));n.displayName="TableFooter";let o=l.forwardRef(({className:e,...l},r)=>(0,a.jsx)("tr",{ref:r,className:(0,t.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...l}));o.displayName="TableRow";let i=l.forwardRef(({className:e,...l},r)=>(0,a.jsx)("th",{ref:r,className:(0,t.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...l}));i.displayName="TableHead";let c=l.forwardRef(({className:e,...l},r)=>(0,a.jsx)("td",{ref:r,className:(0,t.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...l}));c.displayName="TableCell",l.forwardRef(({className:e,...l},r)=>(0,a.jsx)("caption",{ref:r,className:(0,t.cn)("mt-4 text-sm text-muted-foreground",e),...l})).displayName="TableCaption",e.s(["Table",()=>r,"TableBody",()=>d,"TableCell",()=>c,"TableFooter",()=>n,"TableHead",()=>i,"TableHeader",()=>s,"TableRow",()=>o])},25288,e=>{"use strict";var a=e.i(43476),l=e.i(71645),t=e.i(15288),r=e.i(19455),s=e.i(10204),d=e.i(67489),n=e.i(84774);e.i(11981);var o=e.i(80428),i=e.i(96354),c=e.i(28880),m=e.i(86135),x=e.i(45919),h=e.i(39126),f=e.i(43104);function u(){let{selectedCompany:e}=l.default.useContext(h.SelectedCompanyContext)||{},u=e?.id,b=new Date().getFullYear(),j=new Date().getMonth(),[p,C]=l.default.useState(b),[g,T]=l.default.useState(j),[N,y]=l.default.useState(null),{data:w,loading:R}=(0,o.useCollection)({path:`companies/${u}/sales`,companyId:u}),{data:v,loading:S}=(0,o.useCollection)({path:`companies/${u}/purchases`,companyId:u}),M=R||S;return(0,a.jsxs)("div",{className:"grid gap-6",children:[(0,a.jsxs)(t.Card,{children:[(0,a.jsxs)(t.CardHeader,{children:[(0,a.jsx)(t.CardTitle,{children:"Resumen Mensual IVA"}),(0,a.jsx)(t.CardDescription,{children:"Consulta el resumen mensual de IVA (Impuesto al Valor Agregado)."})]}),(0,a.jsx)(t.CardContent,{children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-end max-w-lg",children:[(0,a.jsxs)("div",{className:"flex-1 grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(s.Label,{htmlFor:"month",children:"Mes"}),(0,a.jsxs)(d.Select,{value:g.toString(),onValueChange:e=>T(parseInt(e)),children:[(0,a.jsx)(d.SelectTrigger,{id:"month",children:(0,a.jsx)(d.SelectValue,{})}),(0,a.jsx)(d.SelectContent,{children:Array.from({length:12},(e,l)=>(0,a.jsx)(d.SelectItem,{value:l.toString(),children:(0,x.format)(new Date(0,l),"MMMM",{locale:f.es})},l))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(s.Label,{htmlFor:"year",children:"Año"}),(0,a.jsxs)(d.Select,{value:p.toString(),onValueChange:e=>C(parseInt(e)),children:[(0,a.jsx)(d.SelectTrigger,{id:"year",children:(0,a.jsx)(d.SelectValue,{})}),(0,a.jsx)(d.SelectContent,{children:Array.from({length:5},(e,l)=>(0,a.jsx)(d.SelectItem,{value:(b-l).toString(),children:b-l},b-l))})]})]})]}),(0,a.jsx)(r.Button,{onClick:()=>{let e=(0,i.startOfMonth)(new Date(p,g)),a=(0,c.endOfMonth)(new Date(p,g)),l=w?.filter(l=>{let t=(0,m.parseISO)(l.date);return t>=e&&t<=a&&("Contabilizado"===l.status||"Cobrado"===l.status)})||[],t=v?.filter(l=>{let t=(0,m.parseISO)(l.date);return t>=e&&t<=a&&("Contabilizado"===l.status||"Pagado"===l.status)})||[],r=l.reduce((e,a)=>e+(a.total-a.netAmount-a.exemptAmount),0),s=t.reduce((e,a)=>e+a.taxAmount,0);y({debit:r,credit:s,total:r-s})},disabled:M||!u,children:M?"Cargando...":"Generar Resumen"})]})})]}),(0,a.jsxs)(t.Card,{children:[(0,a.jsxs)(t.CardHeader,{children:[(0,a.jsx)(t.CardTitle,{children:"Resumen de IVA"}),(0,a.jsx)(t.CardDescription,{children:N?`Resumen para ${(0,x.format)(new Date(p,g),"MMMM yyyy",{locale:f.es})}`:u?"Aún no se ha generado ningún resumen.":"Por favor, selecciona una empresa."})]}),(0,a.jsx)(t.CardContent,{children:N?(0,a.jsxs)(n.Table,{children:[(0,a.jsx)(n.TableHeader,{children:(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableHead,{children:"Concepto"}),(0,a.jsx)(n.TableHead,{className:"text-right",children:"Monto"})]})}),(0,a.jsxs)(n.TableBody,{children:[(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableCell,{children:"IVA Débito Fiscal (Ventas)"}),(0,a.jsxs)(n.TableCell,{className:"text-right",children:["$",Math.round(N.debit).toLocaleString("es-CL")]})]}),(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableCell,{children:"IVA Crédito Fiscal (Compras)"}),(0,a.jsxs)(n.TableCell,{className:"text-right",children:["- $",Math.round(N.credit).toLocaleString("es-CL")]})]})]}),(0,a.jsx)(n.TableFooter,{children:(0,a.jsxs)(n.TableRow,{className:"font-bold text-lg",children:[(0,a.jsx)(n.TableCell,{children:N.total>=0?"IVA a Pagar":"Remanente Crédito Fiscal"}),(0,a.jsxs)(n.TableCell,{className:"text-right",children:["$",Math.round(Math.abs(N.total)).toLocaleString("es-CL")]})]})})]}):(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Usa el generador para ver el resumen de IVA."})})]})]})}e.s(["default",()=>u])}]);