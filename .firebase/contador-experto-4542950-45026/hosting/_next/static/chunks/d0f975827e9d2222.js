(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,38815,e=>{"use strict";var a=e.i(35684);function t(e,t){return+(0,a.toDate)(e)<+(0,a.toDate)(t)}e.s(["isBefore",()=>t])},88515,e=>{"use strict";var a=e.i(35684);function t(e){let t=(0,a.toDate)(e),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(0,0,0,0),t}e.s(["lastDayOfMonth",()=>t])},29592,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(25913),r=e.i(75157);let i=(0,s.cva)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),n=t.forwardRef(({className:e,variant:t,...s},n)=>(0,a.jsx)("div",{ref:n,role:"alert",className:(0,r.cn)(i({variant:t}),e),...s}));n.displayName="Alert";let o=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("h5",{ref:s,className:(0,r.cn)("mb-1 font-medium leading-none tracking-tight",e),...t}));o.displayName="AlertTitle";let l=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,r.cn)("text-sm [&_p]:leading-relaxed",e),...t}));l.displayName="AlertDescription",e.s(["Alert",()=>n,"AlertDescription",()=>l,"AlertTitle",()=>o])},97245,e=>{"use strict";var a=e.i(35684),t=e.i(96226);function s(e,s){let r=(0,a.toDate)(e);if(isNaN(s))return(0,t.constructFrom)(e,NaN);if(!s)return r;let i=r.getDate(),n=(0,t.constructFrom)(e,r.getTime());return(n.setMonth(r.getMonth()+s+1,0),i>=n.getDate())?n:(r.setFullYear(n.getFullYear(),n.getMonth(),i),r)}e.s(["addMonths",()=>s])},39189,e=>{"use strict";var a=e.i(35684),t=e.i(96226);function s(e,s){let r=(0,a.toDate)(e);return isNaN(s)?(0,t.constructFrom)(e,NaN):(s&&r.setDate(r.getDate()+s),r)}e.s(["addDays",()=>s])},37822,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(81140),r=e.i(20783),i=e.i(30030),n=e.i(26330),o=e.i(3536),l=e.i(65491),c=e.i(10772),d=e.i(53660),u=e.i(74606),m=e.i(96626),p=e.i(48425),h=e.i(91918),f=e.i(69340),x=e.i(86312),v=e.i(85369),j="Popover",[g,b]=(0,i.createContextScope)(j,[d.createPopperScope]),y=(0,d.createPopperScope)(),[C,N]=g(j),P=e=>{let{__scopePopover:s,children:r,open:i,defaultOpen:n,onOpenChange:o,modal:l=!1}=e,u=y(s),m=t.useRef(null),[p,h]=t.useState(!1),[x,v]=(0,f.useControllableState)({prop:i,defaultProp:n??!1,onChange:o,caller:j});return(0,a.jsx)(d.Root,{...u,children:(0,a.jsx)(C,{scope:s,contentId:(0,c.useId)(),triggerRef:m,open:x,onOpenChange:v,onOpenToggle:t.useCallback(()=>v(e=>!e),[v]),hasCustomAnchor:p,onCustomAnchorAdd:t.useCallback(()=>h(!0),[]),onCustomAnchorRemove:t.useCallback(()=>h(!1),[]),modal:l,children:r})})};P.displayName=j;var w="PopoverAnchor";t.forwardRef((e,s)=>{let{__scopePopover:r,...i}=e,n=N(w,r),o=y(r),{onCustomAnchorAdd:l,onCustomAnchorRemove:c}=n;return t.useEffect(()=>(l(),()=>c()),[l,c]),(0,a.jsx)(d.Anchor,{...o,...i,ref:s})}).displayName=w;var D="PopoverTrigger",S=t.forwardRef((e,t)=>{let{__scopePopover:i,...n}=e,o=N(D,i),l=y(i),c=(0,r.useComposedRefs)(t,o.triggerRef),u=(0,a.jsx)(p.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":O(o.open),...n,ref:c,onClick:(0,s.composeEventHandlers)(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?u:(0,a.jsx)(d.Anchor,{asChild:!0,...l,children:u})});S.displayName=D;var A="PopoverPortal",[I,T]=g(A,{forceMount:void 0}),F=e=>{let{__scopePopover:t,forceMount:s,children:r,container:i}=e,n=N(A,t);return(0,a.jsx)(I,{scope:t,forceMount:s,children:(0,a.jsx)(m.Presence,{present:s||n.open,children:(0,a.jsx)(u.Portal,{asChild:!0,container:i,children:r})})})};F.displayName=A;var E="PopoverContent",k=t.forwardRef((e,t)=>{let s=T(E,e.__scopePopover),{forceMount:r=s.forceMount,...i}=e,n=N(E,e.__scopePopover);return(0,a.jsx)(m.Presence,{present:r||n.open,children:n.modal?(0,a.jsx)(z,{...i,ref:t}):(0,a.jsx)(M,{...i,ref:t})})});k.displayName=E;var R=(0,h.createSlot)("PopoverContent.RemoveScroll"),z=t.forwardRef((e,i)=>{let n=N(E,e.__scopePopover),o=t.useRef(null),l=(0,r.useComposedRefs)(i,o),c=t.useRef(!1);return t.useEffect(()=>{let e=o.current;if(e)return(0,x.hideOthers)(e)},[]),(0,a.jsx)(v.RemoveScroll,{as:R,allowPinchZoom:!0,children:(0,a.jsx)(L,{...e,ref:l,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,s.composeEventHandlers)(e.onCloseAutoFocus,e=>{e.preventDefault(),c.current||n.triggerRef.current?.focus()}),onPointerDownOutside:(0,s.composeEventHandlers)(e.onPointerDownOutside,e=>{let a=e.detail.originalEvent,t=0===a.button&&!0===a.ctrlKey;c.current=2===a.button||t},{checkForDefaultPrevented:!1}),onFocusOutside:(0,s.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),M=t.forwardRef((e,s)=>{let r=N(E,e.__scopePopover),i=t.useRef(!1),n=t.useRef(!1);return(0,a.jsx)(L,{...e,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(i.current||r.triggerRef.current?.focus(),a.preventDefault()),i.current=!1,n.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(i.current=!0,"pointerdown"===a.detail.originalEvent.type&&(n.current=!0));let t=a.target;r.triggerRef.current?.contains(t)&&a.preventDefault(),"focusin"===a.detail.originalEvent.type&&n.current&&a.preventDefault()}})}),L=t.forwardRef((e,t)=>{let{__scopePopover:s,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:c,disableOutsidePointerEvents:u,onEscapeKeyDown:m,onPointerDownOutside:p,onFocusOutside:h,onInteractOutside:f,...x}=e,v=N(E,s),j=y(s);return(0,o.useFocusGuards)(),(0,a.jsx)(l.FocusScope,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:c,children:(0,a.jsx)(n.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:u,onInteractOutside:f,onEscapeKeyDown:m,onPointerDownOutside:p,onFocusOutside:h,onDismiss:()=>v.onOpenChange(!1),children:(0,a.jsx)(d.Content,{"data-state":O(v.open),role:"dialog",id:v.contentId,...j,...x,ref:t,style:{...x.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),H="PopoverClose";function O(e){return e?"open":"closed"}t.forwardRef((e,t)=>{let{__scopePopover:r,...i}=e,n=N(H,r);return(0,a.jsx)(p.Primitive.button,{type:"button",...i,ref:t,onClick:(0,s.composeEventHandlers)(e.onClick,()=>n.onOpenChange(!1))})}).displayName=H,t.forwardRef((e,t)=>{let{__scopePopover:s,...r}=e,i=y(s);return(0,a.jsx)(d.Arrow,{...i,...r,ref:t})}).displayName="PopoverArrow";var B=e.i(75157);let Y=t.forwardRef(({className:e,align:t="center",sideOffset:s=4,...r},i)=>(0,a.jsx)(F,{children:(0,a.jsx)(k,{ref:i,align:t,sideOffset:s,className:(0,B.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Y.displayName=k.displayName,e.s(["Popover",()=>P,"PopoverContent",()=>Y,"PopoverTrigger",()=>S],37822)},44523,e=>{"use strict";let a=(0,e.i(75254).default)("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);e.s(["ChevronsUpDown",()=>a],44523)},57428,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(20783),r=e.i(30030),i=e.i(81140),n=e.i(69340),o=e.i(99682),l=e.i(35804),c=e.i(96626),d=e.i(48425),u="Checkbox",[m,p]=(0,r.createContextScope)(u),[h,f]=m(u);function x(e){let{__scopeCheckbox:s,checked:r,children:i,defaultChecked:o,disabled:l,form:c,name:d,onCheckedChange:m,required:p,value:f="on",internal_do_not_use_render:x}=e,[v,j]=(0,n.useControllableState)({prop:r,defaultProp:o??!1,onChange:m,caller:u}),[g,b]=t.useState(null),[y,C]=t.useState(null),N=t.useRef(!1),w=!g||!!c||!!g.closest("form"),D={checked:v,disabled:l,setChecked:j,control:g,setControl:b,name:d,form:c,value:f,hasConsumerStoppedPropagationRef:N,required:p,defaultChecked:!P(o)&&o,isFormControl:w,bubbleInput:y,setBubbleInput:C};return(0,a.jsx)(h,{scope:s,...D,children:"function"==typeof x?x(D):i})}var v="CheckboxTrigger",j=t.forwardRef(({__scopeCheckbox:e,onKeyDown:r,onClick:n,...o},l)=>{let{control:c,value:u,disabled:m,checked:p,required:h,setControl:x,setChecked:j,hasConsumerStoppedPropagationRef:g,isFormControl:b,bubbleInput:y}=f(v,e),C=(0,s.useComposedRefs)(l,x),N=t.useRef(p);return t.useEffect(()=>{let e=c?.form;if(e){let a=()=>j(N.current);return e.addEventListener("reset",a),()=>e.removeEventListener("reset",a)}},[c,j]),(0,a.jsx)(d.Primitive.button,{type:"button",role:"checkbox","aria-checked":P(p)?"mixed":p,"aria-required":h,"data-state":w(p),"data-disabled":m?"":void 0,disabled:m,value:u,...o,ref:C,onKeyDown:(0,i.composeEventHandlers)(r,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,i.composeEventHandlers)(n,e=>{j(e=>!!P(e)||!e),y&&b&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})})});j.displayName=v;var g=t.forwardRef((e,t)=>{let{__scopeCheckbox:s,name:r,checked:i,defaultChecked:n,required:o,disabled:l,value:c,onCheckedChange:d,form:u,...m}=e;return(0,a.jsx)(x,{__scopeCheckbox:s,checked:i,defaultChecked:n,disabled:l,required:o,onCheckedChange:d,name:r,form:u,value:c,internal_do_not_use_render:({isFormControl:e})=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j,{...m,ref:t,__scopeCheckbox:s}),e&&(0,a.jsx)(N,{__scopeCheckbox:s})]})})});g.displayName=u;var b="CheckboxIndicator",y=t.forwardRef((e,t)=>{let{__scopeCheckbox:s,forceMount:r,...i}=e,n=f(b,s);return(0,a.jsx)(c.Presence,{present:r||P(n.checked)||!0===n.checked,children:(0,a.jsx)(d.Primitive.span,{"data-state":w(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});y.displayName=b;var C="CheckboxBubbleInput",N=t.forwardRef(({__scopeCheckbox:e,...r},i)=>{let{control:n,hasConsumerStoppedPropagationRef:c,checked:u,defaultChecked:m,required:p,disabled:h,name:x,value:v,form:j,bubbleInput:g,setBubbleInput:b}=f(C,e),y=(0,s.useComposedRefs)(i,b),N=(0,o.usePrevious)(u),w=(0,l.useSize)(n);t.useEffect(()=>{if(!g)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,a=!c.current;if(N!==u&&e){let t=new Event("click",{bubbles:a});g.indeterminate=P(u),e.call(g,!P(u)&&u),g.dispatchEvent(t)}},[g,N,u,c]);let D=t.useRef(!P(u)&&u);return(0,a.jsx)(d.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:m??D.current,required:p,disabled:h,name:x,value:v,form:j,...r,tabIndex:-1,ref:y,style:{...r.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function P(e){return"indeterminate"===e}function w(e){return P(e)?"indeterminate":e?"checked":"unchecked"}N.displayName=C;var D=e.i(43531),S=e.i(75157);let A=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)(g,{ref:s,className:(0,S.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:(0,a.jsx)(y,{className:(0,S.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(D.Check,{className:"h-4 w-4"})})}));A.displayName=g.displayName,e.s(["Checkbox",()=>A],57428)},22044,e=>{"use strict";var a=e.i(35684);function t(e){return(0,a.toDate)(e).getFullYear()}e.s(["getYear",()=>t])},78894,e=>{"use strict";let a=(0,e.i(75254).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>a],78894)},24687,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(75157);let r=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));r.displayName="Textarea",e.s(["Textarea",()=>r])},3360,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(15288),r=e.i(19455),i=e.i(55764),n=e.i(10204),o=e.i(67489),l=e.i(57428),c=e.i(24687),d=e.i(37822),u=e.i(46798),m=e.i(61277),m=m,p=e.i(44523),h=e.i(43531),f=e.i(78894);let x=(0,e.i(75254).default)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var v=e.i(27766),j=e.i(17056);e.i(11981);var g=e.i(80428),b=e.i(61480),y=e.i(78122);e.i(36180);var C=e.i(17875);e.i(61978);var N=e.i(94397),P=e.i(39126),w=e.i(75157),D=e.i(45919),S=e.i(35684);function A(e,a){let t=(0,S.toDate)(e),s=(0,S.toDate)(a),r=t.getTime()-s.getTime();return r<0?-1:r>0?1:r}var I=e.i(1159),T=e.i(28880),F=e.i(37957),E=e.i(65811),k=e.i(22044),R=e.i(43104),z=e.i(8406),M=e.i(29592);let L=e=>new Intl.NumberFormat("es-CL",{style:"currency",currency:"CLP"}).format(Math.round(e)),H=({children:e})=>(0,a.jsxs)(u.Tooltip,{children:[(0,a.jsx)(u.TooltipTrigger,{asChild:!0,children:(0,a.jsx)(x,{className:"h-4 w-4 text-muted-foreground cursor-help ml-1.5"})}),(0,a.jsx)(u.TooltipContent,{children:(0,a.jsx)("p",{className:"max-w-xs p-2",children:e})})]}),O={nombreTrabajador:"",rutTrabajador:"",nombreEmpleador:"",rutEmpleador:"",fechaInicio:void 0,fechaTermino:new Date,causalTermino:"Artículo 161, inciso primero: Necesidades de la empresa.",baseIndemnizacion:0,anosServicio:0,diasFeriado:0,incluyeMesAviso:!0,remuneracionesPendientes:0,otrosHaberes:0,descuentosPrevisionales:0,otrosDescuentos:0,causalHechos:"",formaPago:"Transferencia Electrónica",fechaPago:new Date,ciudadFirma:"",ministroDeFe:"Notario Público de [Ciudad del Notario]"};function B(){let{selectedCompany:e}=t.default.useContext(P.SelectedCompanyContext)||{},x=(0,b.useFirestore)(),{data:B,loading:Y}=(0,g.useCollection)({path:e?`companies/${e.id}/employees`:void 0}),[_,U]=t.default.useState(null),[q,$]=t.default.useState(!1),{toast:G}=(0,z.useToast)(),[V,K]=t.default.useState([]),[X,Z]=t.default.useState(new Set),[J,Q]=t.default.useState(O),[W,ee]=t.default.useState({indemnizacionAnos:0,indemnizacionSustitutiva:0,feriadoLegal:0,totalHaberes:0,totalDescuentos:0,totalAPagar:0});t.default.useEffect(()=>{e&&Q(a=>({...a,nombreEmpleador:e.name,rutEmpleador:e.rut,ciudadFirma:e.commune||""}))},[e]);let ea=t.default.useMemo(()=>B?.find(e=>e.id===_)||null,[B,_]);t.default.useEffect(()=>{if(Z(new Set),ea){let a;ea.contractStartDate&&ea.contractStartDate instanceof C.Timestamp&&(a=ea.contractStartDate.toDate());let t=new Date;ea.contractEndDate&&ea.contractEndDate instanceof C.Timestamp&&(t=ea.contractEndDate.toDate()),Q(s=>({...O,nombreEmpleador:e?.name||"",rutEmpleador:e?.rut||"",ciudadFirma:e?.commune||"",nombreTrabajador:`${ea.firstName} ${ea.lastName}`,rutTrabajador:ea.rut,fechaInicio:a,fechaTermino:t}))}else Q(a=>({...O,nombreEmpleador:e?.name||"",rutEmpleador:e?.rut||"",ciudadFirma:e?.commune||""}))},[ea,e]),t.default.useEffect(()=>{(async()=>{if(!(!x||!e||!ea||X.has("baseIndemnizacion")))try{let a=(0,N.httpsCallable)(y.functions,"getLatestPayrollSalary"),t=await a({companyId:e.id,employeeId:ea.id}),s=t?.data?.baseIndemnizacion??null;if(null===s)return void et("baseIndemnizacion",0);let r=J.fechaTermino||new Date,i=(0,k.getYear)(r),n=(0,S.toDate)(r).getMonth()+1,o=`${i}-${String(n).padStart(2,"0")}`,l=(0,C.doc)(x,"economicIndicators",o),c=await (0,C.getDoc)(l),d=s;if(c.exists()){let e=c.data();if(e.uf){let a=90*e.uf;d=Math.min(s,a)}}et("baseIndemnizacion",Math.round(d))}catch(e){console.error("Error calling getLatestPayrollSalary function:",e),G({title:"Error de Sugerencia",description:"No se pudo sugerir el sueldo base. Ingréselo manualmente.",variant:"destructive"})}})()},[ea,e,x,X,J.fechaTermino,G]),t.default.useEffect(()=>{if(!J.fechaInicio||!J.fechaTermino)return;let e=J.fechaInicio,a=J.fechaTermino;if(!X.has("anosServicio")){let t=function(e,a){let t,s=(0,S.toDate)(e),r=(0,S.toDate)(a),i=A(s,r),n=Math.abs((0,I.differenceInCalendarMonths)(s,r));if(n<1)t=0;else{var o;let a,l;1===s.getMonth()&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-i*n);let c=A(s,r)===-i;o=(0,S.toDate)(e),+(a=(0,S.toDate)(o),(l=(0,S.toDate)(a)).setHours(23,59,59,999),l)==+(0,T.endOfMonth)(a)&&1===n&&1===A(e,r)&&(c=!1),t=i*(n-Number(c))}return 0===t?0:t}(a,e),s=Math.floor(t/12);t%12>=6&&(s+=1),et("anosServicio",s)}if(!X.has("diasFeriado")){let t,s,r,i,n,o,l,c,d=(0,F.addYears)(e,(t=(0,S.toDate)(a),r=A(t,s=(0,S.toDate)(e)),o=Math.abs((i=(0,S.toDate)(t),n=(0,S.toDate)(s),i.getFullYear()-n.getFullYear())),t.setFullYear(1584),s.setFullYear(1584),l=A(t,s)===-r,0==(c=r*(o-l))?0:c));d>a&&(d=(0,F.addYears)(d,-1)),et("diasFeriado",parseFloat(((0,E.differenceInDays)(a,d)/365*15).toFixed(2)))}},[J.fechaInicio,J.fechaTermino,X]),t.default.useEffect(()=>{let e=[];if(_||e.push("Debes seleccionar un empleado para iniciar el cálculo."),J.fechaInicio||e.push("La fecha de inicio del contrato es necesaria."),J.fechaTermino||e.push("La fecha de término del contrato es necesaria."),(void 0===J.baseIndemnizacion||J.baseIndemnizacion<=0)&&e.push("El sueldo base para indemnización debe ser mayor a cero."),K(e),e.length>0)return void ee({indemnizacionAnos:0,indemnizacionSustitutiva:0,feriadoLegal:0,totalHaberes:0,totalDescuentos:0,totalAPagar:0});let a=J.baseIndemnizacion||0,t=J.anosServicio||0,s=J.diasFeriado||0,r=a*t,i=J.incluyeMesAviso?a:0,n=a/30*s,o=r+i+n+(J.remuneracionesPendientes||0)+(J.otrosHaberes||0),l=(J.descuentosPrevisionales||0)+(J.otrosDescuentos||0);ee({indemnizacionAnos:r,indemnizacionSustitutiva:i,feriadoLegal:n,totalHaberes:o,totalDescuentos:l,totalAPagar:o-l})},[J,_]);let et=(e,a,t=!1)=>{Q(t=>({...t,[e]:a})),t&&Z(a=>new Set(a).add(e))};return(0,a.jsx)(u.TooltipProvider,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(s.Card,{children:[(0,a.jsxs)(s.CardHeader,{children:[(0,a.jsx)(s.CardTitle,{children:"Generador de Finiquitos"}),(0,a.jsx)(s.CardDescription,{children:"Completa los datos para generar el documento de finiquito de un trabajador."})]}),(0,a.jsxs)(s.CardContent,{className:"space-y-6",children:[V.length>0&&(0,a.jsxs)(M.Alert,{variant:"destructive",children:[(0,a.jsx)(f.AlertTriangle,{className:"h-4 w-4"}),(0,a.jsx)(M.AlertTitle,{children:"Faltan Datos para el Cálculo"}),(0,a.jsx)(M.AlertDescription,{children:(0,a.jsx)("ul",{className:"list-disc pl-5",children:V.map((e,t)=>(0,a.jsx)("li",{children:e},t))})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"Seleccionar Persona"}),(0,a.jsxs)(d.Popover,{open:q,onOpenChange:$,children:[(0,a.jsx)(d.PopoverTrigger,{asChild:!0,children:(0,a.jsxs)(r.Button,{variant:"outline",role:"combobox","aria-expanded":q,className:"w-full justify-between font-normal",children:[ea?`${ea.firstName} ${ea.lastName} (${ea.rut})`:"Seleccionar empleado...",(0,a.jsx)(p.ChevronsUpDown,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,a.jsx)(d.PopoverContent,{className:"w-[--radix-popover-trigger-width] p-0",children:(0,a.jsxs)(j.Command,{children:[(0,a.jsx)(j.CommandInput,{placeholder:"Buscar empleado..."}),(0,a.jsxs)(j.CommandList,{children:[(0,a.jsx)(j.CommandEmpty,{children:"No se encontraron empleados."}),(0,a.jsxs)(j.CommandGroup,{children:[Y&&(0,a.jsx)(j.CommandItem,{children:"Cargando..."}),B?.map(e=>(0,a.jsxs)(j.CommandItem,{value:`${e.firstName} ${e.lastName} ${e.rut}`,onSelect:()=>{U(e.id),$(!1)},children:[(0,a.jsx)(h.Check,{className:(0,w.cn)("mr-2 h-4 w-4",_===e.id?"opacity-100":"opacity-0")}),e.firstName," ",e.lastName," ",(0,a.jsx)("span",{className:"text-muted-foreground ml-2",children:e.rut})]},e.id))]})]})]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"Nombre del Trabajador"}),(0,a.jsx)(i.Input,{value:J.nombreTrabajador||"",disabled:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"RUT del Trabajador"}),(0,a.jsx)(i.Input,{value:J.rutTrabajador||"",disabled:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"Fecha de Inicio"}),(0,a.jsxs)(d.Popover,{children:[(0,a.jsx)(d.PopoverTrigger,{asChild:!0,children:(0,a.jsxs)(r.Button,{variant:"outline",className:(0,w.cn)("w-full justify-start text-left font-normal",!J.fechaInicio&&"text-muted-foreground"),children:[(0,a.jsx)(m.default,{className:"mr-2 h-4 w-4"}),J.fechaInicio?(0,D.format)(J.fechaInicio,"PPP",{locale:R.es}):(0,a.jsx)("span",{children:"Seleccionar fecha"})]})}),(0,a.jsx)(d.PopoverContent,{className:"w-auto p-0",children:(0,a.jsx)(v.Calendar,{mode:"single",selected:J.fechaInicio,onSelect:e=>et("fechaInicio",e,!0),initialFocus:!0})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"Fecha de Término"}),(0,a.jsxs)(d.Popover,{children:[(0,a.jsx)(d.PopoverTrigger,{asChild:!0,children:(0,a.jsxs)(r.Button,{variant:"outline",className:(0,w.cn)("w-full justify-start text-left font-normal",!J.fechaTermino&&"text-muted-foreground"),children:[(0,a.jsx)(m.default,{className:"mr-2 h-4 w-4"}),J.fechaTermino?(0,D.format)(J.fechaTermino,"PPP",{locale:R.es}):(0,a.jsx)("span",{children:"Seleccionar fecha"})]})}),(0,a.jsx)(d.PopoverContent,{className:"w-auto p-0",children:(0,a.jsx)(v.Calendar,{mode:"single",selected:J.fechaTermino,onSelect:e=>et("fechaTermino",e,!0),initialFocus:!0})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(n.Label,{children:"Causal de Término"}),(0,a.jsxs)(o.Select,{value:J.causalTermino||"",onValueChange:e=>et("causalTermino",e,!0),children:[(0,a.jsx)(o.SelectTrigger,{children:(0,a.jsx)(o.SelectValue,{})}),(0,a.jsxs)(o.SelectContent,{children:[(0,a.jsx)(o.SelectItem,{value:"Artículo 159, n° 1: Mutuo acuerdo de las partes.",children:"Art. 159, N°1: Mutuo acuerdo"}),(0,a.jsx)(o.SelectItem,{value:"Artículo 159, n° 2: Renuncia del trabajador.",children:"Art. 159, N°2: Renuncia"}),(0,a.jsx)(o.SelectItem,{value:"Artículo 159, n° 4: Vencimiento del plazo convenido.",children:"Art. 159, N°4: Vencimiento de plazo"}),(0,a.jsx)(o.SelectItem,{value:"Artículo 159, n° 5: Conclusión del trabajo o servicio.",children:"Art. 159, N°5: Conclusión de servicio"}),(0,a.jsx)(o.SelectItem,{value:"Artículo 160, n° 1, letra a: Falta de probidad.",children:"Art. 160, N°1a: Falta de probidad"}),(0,a.jsx)(o.SelectItem,{value:"Artículo 160, n° 7: Incumplimiento grave de las obligaciones.",children:"Art. 160, N°7: Incumplimiento grave"}),(0,a.jsx)(o.SelectItem,{value:"Artículo 161, inciso primero: Necesidades de la empresa.",children:"Art. 161: Necesidades de la empresa"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2 md:col-span-2 lg:col-span-3",children:[(0,a.jsx)(n.Label,{children:"Hechos que Fundamentan la Causal"}),(0,a.jsx)(c.Textarea,{value:J.causalHechos||"",onChange:e=>et("causalHechos",e.target.value,!0),placeholder:"Describe los hechos que justifican la causal de término de contrato..."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.Label,{htmlFor:"baseIndemnizacion",children:"Sueldo Base para Indemnización"}),(0,a.jsx)(H,{children:"Corresponde a la última remuneración mensual devengada (sueldo, comisiones, bonos, etc.). Tiene un tope legal de 90 UF. El sistema sugiere este valor desde la última liquidación, pero puede ser ajustado."})]}),(0,a.jsx)(i.Input,{id:"baseIndemnizacion",type:"number",value:J.baseIndemnizacion||0,onChange:e=>et("baseIndemnizacion",parseFloat(e.target.value),!0),placeholder:"0"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.Label,{htmlFor:"anosServicio",children:"Años de Servicio a Indemnizar"}),(0,a.jsx)(H,{children:"El sistema calcula los años de servicio desde la fecha de inicio. Se cuenta un año completo si la fracción es de 6 meses o más. El tope legal es de 11 años."})]}),(0,a.jsx)(i.Input,{id:"anosServicio",type:"number",value:J.anosServicio||0,onChange:e=>et("anosServicio",parseInt(e.target.value),!0),placeholder:"0"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.Label,{htmlFor:"diasFeriado",children:"Días de Feriado Proporcional"}),(0,a.jsx)(H,{children:"Días de vacaciones acumulados y no tomados, incluyendo los días proporcionales del último período. El sistema lo calcula automáticamente, pero puedes ajustarlo si es necesario."})]}),(0,a.jsx)(i.Input,{id:"diasFeriado",type:"number",value:J.diasFeriado||0,onChange:e=>et("diasFeriado",parseFloat(e.target.value),!0),placeholder:"0"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(l.Checkbox,{id:"incluyeMesAviso",checked:J.incluyeMesAviso,onCheckedChange:e=>et("incluyeMesAviso",e,!0)}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.Label,{htmlFor:"incluyeMesAviso",children:"Incluir Indemnización Sustitutiva del Aviso Previo (Mes de Aviso)"}),(0,a.jsx)(H,{children:"Aplica principalmente para la causal de Necesidades de la Empresa (Art. 161) si el despido no se avisó con 30 días de anticipación. Equivale a un mes de la base de indemnización."})]})]})]})]}),0===V.length&&(0,a.jsxs)(s.Card,{children:[(0,a.jsx)(s.CardHeader,{children:(0,a.jsx)(s.CardTitle,{children:"Resultados del Cálculo"})}),(0,a.jsxs)(s.CardContent,{className:"space-y-4 text-sm",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"HABERES"}),(0,a.jsxs)("div",{className:"pl-4 border-l-2 space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("p",{children:"Indemnización por Años de Servicio"}),(0,a.jsx)(H,{children:"Cálculo: (Sueldo Base para Indemnización) x (Años de Servicio). Este monto indemniza los años trabajados."})]}),(0,a.jsx)("p",{children:L(W.indemnizacionAnos)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("p",{children:"Indemnización Sustitutiva (Mes de Aviso)"}),(0,a.jsx)(H,{children:"Cálculo: (Sueldo Base para Indemnización) x 1. Se paga si el despido (Art. 161) no se notificó con 30 días de antelación."})]}),(0,a.jsx)("p",{children:L(W.indemnizacionSustitutiva)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("p",{children:"Feriado Legal y Proporcional"}),(0,a.jsx)(H,{children:"Cálculo: (Sueldo Base para Indemnización / 30) x (Días de Feriado). Corresponde al pago de las vacaciones no utilizadas."})]}),(0,a.jsx)("p",{children:L(W.feriadoLegal)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.Label,{htmlFor:"remuneracionesPendientes",children:"Remuneraciones Pendientes"}),(0,a.jsx)(H,{children:"Incluye días trabajados en el mes del despido, comisiones, bonos u otros pagos adeudados."})]}),(0,a.jsx)(i.Input,{id:"remuneracionesPendientes",className:"h-8 max-w-[150px] text-right",type:"number",value:J.remuneracionesPendientes??0,onChange:e=>et("remuneracionesPendientes",parseFloat(e.target.value),!0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.Label,{htmlFor:"otrosHaberes",children:"Otros Haberes"}),(0,a.jsx)(H,{children:"Utiliza este campo para añadir cualquier otro monto a favor del trabajador que no esté en las otras categorías."})]}),(0,a.jsx)(i.Input,{id:"otrosHaberes",className:"h-8 max-w-[150px] text-right",type:"number",value:J.otrosHaberes??0,onChange:e=>et("otrosHaberes",parseFloat(e.target.value),!0)})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center font-bold pt-2",children:[(0,a.jsx)("p",{children:"TOTAL HABERES"}),(0,a.jsx)("p",{children:L(W.totalHaberes)})]}),(0,a.jsx)("h4",{className:"font-semibold pt-4",children:"DESCUENTOS LEGALES"}),(0,a.jsxs)("div",{className:"pl-4 border-l-2 space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.Label,{htmlFor:"descuentosPrevisionales",children:"Aporte Previsional sobre Indemnizaciones"}),(0,a.jsx)(H,{children:"Descuento que realiza la AFC del saldo de la Cuenta Individual de Cesantía (CIC) del trabajador, cuando la causal es Necesidades de la Empresa."})]}),(0,a.jsx)(i.Input,{id:"descuentosPrevisionales",className:"h-8 max-w-[150px] text-right",type:"number",value:J.descuentosPrevisionales??0,onChange:e=>et("descuentosPrevisionales",parseFloat(e.target.value),!0)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(n.Label,{htmlFor:"otrosDescuentos",children:"Otros Descuentos"}),(0,a.jsx)(H,{children:"Utiliza este campo para descuentos como préstamos del empleador, anticipos no descontados, etc. Deben estar debidamente justificados."})]}),(0,a.jsx)(i.Input,{id:"otrosDescuentos",className:"h-8 max-w-[150px] text-right",type:"number",value:J.otrosDescuentos??0,onChange:e=>et("otrosDescuentos",parseFloat(e.target.value),!0)})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center font-bold pt-2",children:[(0,a.jsx)("p",{children:"TOTAL DESCUENTOS"}),(0,a.jsx)("p",{children:L(W.totalDescuentos)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center font-bold text-xl pt-4 text-blue-600",children:[(0,a.jsx)("p",{children:"TOTAL A PAGAR"}),(0,a.jsx)("p",{children:L(W.totalAPagar)})]})]})]})]})})}e.s(["default",()=>B],3360)}]);